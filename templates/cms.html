<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MyCMS Admin Panel</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      font-size: 16px;
    }
    #dynamic-content h1, 
    #dynamic-content h2, 
    #dynamic-content p {
      all: unset;
      font-size: revert;
    }
    #dynamic-content {
      font-size: 1rem;
      color: #1f2937;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 text-base">

  <div class="flex min-h-screen">
    <aside class="w-64 bg-white border-r hidden md:flex flex-col">
      <div class="p-6 border-b">
        <a href="/cms" class="flex items-center space-x-3">
          <img src="static/imgs/home.png" alt="MyCMS Logo" class="w-8 h-8">
          <span class="text-2xl text-blue-700">MyCMS</span>
        </a>
      </div>
      <nav class="flex-1 p-4 space-y-2">
        <button onclick="loadForm('/add-fragment')" id="menu-project" class="w-full text-left px-4 py-2 rounded-lg hover:bg-blue-100 hover:text-blue-700 transition">
          ‚ûï Add Project
        </button>
        <button onclick="loadForm('/add-blog-fragment')" id="menu-blog" class="w-full text-left px-4 py-2 rounded-lg hover:bg-blue-100 hover:text-blue-700 transition">
          üìù Add Blog
        </button>
      </nav>
    </aside>

    <main class="flex-1 p-6 md:p-10">
      <div class="mb-8">
        <h1 class="text-4xl mb-2 text-blue-800">Dashboard</h1>
        <p class="text-gray-600">Manage your content from the sidebar.</p>
      </div>
      <div id="dynamic-content" class="bg-white p-6 rounded-xl shadow-md border prose prose-blue max-w-none text-base text-gray-800"></div>
    </main>
  </div>

  <script>
    function setActiveLink(activeId) {
      document.querySelectorAll('button[id^="menu-"]').forEach(btn => {
        btn.classList.remove("bg-blue-600", "text-white");
      });
      const active = document.getElementById(activeId);
      if (active) {
        active.classList.add("bg-blue-600", "text-white");
      }
    }

    function loadForm(url) {
      fetch(url)
        .then(res => res.text())
        .then(html => {
          const temp = document.createElement("div");
          temp.innerHTML = html;
          temp.querySelectorAll("style").forEach(style => style.remove());
          const bodyContent = temp.querySelector("body") || temp;
          document.getElementById("dynamic-content").innerHTML = bodyContent.innerHTML;
          if (url.includes('add-blog')) {
            setActiveLink('menu-blog');
          } else {
            setActiveLink('menu-project');
          }
        })
        .catch(err => {
          document.getElementById("dynamic-content").innerHTML = "<p class='text-red-600'>Gagal memuat konten.</p>";
          console.error(err);
        });
    }
  </script>

</body>
</html>
